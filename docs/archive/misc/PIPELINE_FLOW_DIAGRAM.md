# Pipeline Integration Flow Diagram

## BEFORE THE FIX âŒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     STUDENT APPLIES TO JOB                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  applied_jobs    â”‚
                    â”‚  (INSERT)        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  opportunities   â”‚
                    â”‚  (has NO         â”‚
                    â”‚  requisition_id) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                         âš ï¸ DEAD END âš ï¸
                              
                    âŒ No trigger fires
                    âŒ No pipeline entry created
                    âŒ Student not visible to recruiter
                              
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RECRUITER CHECKS PIPELINE DASHBOARD                â”‚
â”‚                                                                 â”‚
â”‚   pipeline_candidates table:                                   â”‚
â”‚   (empty - student not here)                                   â”‚
â”‚                                                                 â”‚
â”‚   Result: "No candidates found" ğŸ˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## AFTER THE FIX âœ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     STUDENT APPLIES TO JOB                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  applied_jobs    â”‚
                    â”‚  (INSERT)        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    ğŸ”¥ TRIGGER FIRES! ğŸ”¥
                              â”‚
                              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ auto_add_applicant_to_       â”‚
              â”‚ pipeline() function executes â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 1. Get opportunity           â”‚
              â”‚    â†“ has requisition_id âœ…   â”‚
              â”‚ 2. Get student details       â”‚
              â”‚    â†“ from students table     â”‚
              â”‚ 3. Check for duplicates      â”‚
              â”‚    â†“ none found              â”‚
              â”‚ 4. INSERT pipeline_candidate â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ pipeline_        â”‚
                    â”‚ candidates       â”‚
                    â”‚                  â”‚
                    â”‚ â€¢ student_id âœ…  â”‚
                    â”‚ â€¢ requisition_id â”‚
                    â”‚ â€¢ stage: sourced â”‚
                    â”‚ â€¢ source: app    â”‚
                    â”‚ â€¢ status: active â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   STUDENT    â”‚    â”‚  RECRUITER   â”‚    â”‚   DATABASE   â”‚
â”‚              â”‚    â”‚              â”‚    â”‚              â”‚
â”‚ Applications â”‚    â”‚  Pipeline    â”‚    â”‚  View shows  â”‚
â”‚ page shows:  â”‚    â”‚  shows:      â”‚    â”‚  relationshipâ”‚
â”‚              â”‚    â”‚              â”‚    â”‚              â”‚
â”‚ âœ… Job title â”‚    â”‚ âœ… Candidate â”‚    â”‚ âœ… applied_  â”‚
â”‚ âœ… Status    â”‚    â”‚ âœ… Stage     â”‚    â”‚    jobs â†â†’   â”‚
â”‚ âœ… Pipeline  â”‚    â”‚ âœ… Actions   â”‚    â”‚    pipeline_ â”‚
â”‚    stage     â”‚    â”‚ âœ… Can move  â”‚    â”‚    candidatesâ”‚
â”‚ âœ… Interviewsâ”‚    â”‚    stages    â”‚    â”‚              â”‚
â”‚ âœ… Next      â”‚    â”‚ âœ… Can add   â”‚    â”‚              â”‚
â”‚    action    â”‚    â”‚    notes     â”‚    â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## DATA FLOW DIAGRAM

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATABASE TABLES                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ applied_jobs â”‚         â”‚opportunities â”‚         â”‚ requisitions â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id           â”‚         â”‚ id           â”‚         â”‚ id           â”‚
â”‚ student_id   â”‚â”€â”€â”€â”€â”    â”‚ job_title    â”‚    â”Œâ”€â”€â”€â”‚ title        â”‚
â”‚ opportunity_ â”‚    â”‚    â”‚ company_name â”‚    â”‚   â”‚ department   â”‚
â”‚   id         â”‚â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚ requisition_ â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ location     â”‚
â”‚ status       â”‚    â”‚    â”‚   id âœ… NEW! â”‚    â”‚   â”‚ status       â”‚
â”‚ applied_at   â”‚    â”‚    â”‚ recruiter_id â”‚    â”‚   â”‚ owner        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                        â”‚
                    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                    â”‚    â”‚  pipeline_   â”‚    â”‚
                    â”‚    â”‚  candidates  â”‚    â”‚
                    â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
                    â””â”€â”€â”€â–¶â”‚ student_id   â”‚    â”‚
                         â”‚ requisition_ â”‚â—€â”€â”€â”€â”˜
                         â”‚   id         â”‚
                         â”‚ stage        â”‚
                         â”‚ source       â”‚
                         â”‚ status       â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                         Both recruiter
                         and student can
                         see this data!
```

## TRIGGER WORKFLOW

```
Event: INSERT on applied_jobs
  â”‚
  â”œâ”€â–¶ Check: opportunity.requisition_id exists?
  â”‚     â”œâ”€ YES â”€â–¶ Continue
  â”‚     â””â”€ NO â”€â”€â–¶ Skip (log notice)
  â”‚
  â”œâ”€â–¶ Fetch: student details from students table
  â”‚     â”œâ”€ Found â”€â–¶ Continue
  â”‚     â””â”€ Not found â”€â”€â–¶ Skip (log notice)
  â”‚
  â”œâ”€â–¶ Check: duplicate in pipeline_candidates?
  â”‚     â”œâ”€ YES â”€â–¶ Skip (already exists)
  â”‚     â””â”€ NO â”€â”€â–¶ Continue to insert
  â”‚
  â””â”€â–¶ INSERT into pipeline_candidates
        â”œâ”€ requisition_id: from opportunity
        â”œâ”€ student_id: from applied_jobs
        â”œâ”€ candidate_name: from student.profile
        â”œâ”€ candidate_email: from student.profile
        â”œâ”€ stage: 'sourced' (starting stage)
        â”œâ”€ source: 'direct_application'
        â””â”€ status: 'active'
```

## INTEGRATION POINTS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND COMPONENTS                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Student Side:                        Recruiter Side:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Opportunities.   â”‚                â”‚ Pipeline         â”‚
â”‚ jsx              â”‚                â”‚ Dashboard        â”‚
â”‚                  â”‚                â”‚                  â”‚
â”‚ [Apply Button]   â”‚                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ â”‚  Sourced     â”‚ â”‚
         â”‚                          â”‚ â”‚  [Students]  â”‚ â”‚
         â–¼                          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ AppliedJobs      â”‚                â”‚ â”‚  Screening   â”‚ â”‚
â”‚ Service          â”‚                â”‚ â”‚  [Students]  â”‚ â”‚
â”‚ .applyToJob()    â”‚                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚                          â”‚ â”‚  Interview   â”‚ â”‚
         â–¼                          â”‚ â”‚  [Students]  â”‚ â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ Database:        â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ applied_jobs     â”‚                         â–²
â”‚ INSERT           â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
         â”‚                                   â”‚
         â–¼                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚ TRIGGER!         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Auto-add to      â”‚    Creates pipeline entry
â”‚ pipeline         â”‚    visible to recruiter
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Applications.    â”‚
â”‚ jsx              â”‚
â”‚                  â”‚
â”‚ Shows pipeline   â”‚
â”‚ status to        â”‚
â”‚ student          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## SUCCESS INDICATORS

âœ… **In applied_jobs table:**
```sql
id | student_id | opportunity_id | status  | applied_at
---+------------+----------------+---------+------------
1  | uuid-123   | 42             | applied | 2025-11-03
```

âœ… **In opportunities table:**
```sql
id | job_title      | requisition_id
---+----------------+----------------
42 | Software Dev   | req_opp_42     â† THIS IS KEY!
```

âœ… **In pipeline_candidates table:**
```sql
id | student_id | requisition_id | stage   | source
---+------------+----------------+---------+------------------
5  | uuid-123   | req_opp_42     | sourced | direct_application
                  â†‘ MATCHES! â†‘
```

âœ… **Student sees:**
- Application submitted âœ…
- Pipeline stage: "Sourced" âœ…
- Status: "Under Review" âœ…

âœ… **Recruiter sees:**
- New candidate in "Sourced" column âœ…
- Can drag to "Screening" âœ…
- All student details visible âœ…
