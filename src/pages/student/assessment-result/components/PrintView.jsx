/**
 * Print View Component
 * Simple document format for PDF generation
 */
const PrintView = ({ results, studentInfo, riasecNames, traitNames }) => {
    if (!results) return null;

    const { riasec, aptitude, bigFive, workValues, employability, knowledge, careerFit, skillGap, roadmap, finalNote, timingAnalysis } = results;

    return (
        <div className="print-view" style={{ fontFamily: 'Arial, sans-serif', fontSize: '11px', lineHeight: '1.5', color: '#000', padding: '0' }}>
            {/* Page 1: Profile */}
            <div style={{ pageBreakAfter: 'always' }}>
                <div style={{ borderBottom: '3px solid #4338ca', paddingBottom: '10px', marginBottom: '20px' }}>
                    <h1 style={{ fontSize: '20px', fontWeight: 'bold', margin: '0' }}>Career Profiling & Skill Development Report</h1>
                    <p style={{ color: '#666', margin: '5px 0 0 0' }}>4th Semester Analysis | Generated by SkillPassport AI</p>
                </div>

                <table style={{ width: '100%', borderCollapse: 'collapse', marginBottom: '20px' }}>
                    <tbody>
                        <tr>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd', fontWeight: 'bold', width: '25%' }}>Student Name</td>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd' }}>{studentInfo.name}</td>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd', fontWeight: 'bold', width: '25%' }}>Register No.</td>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd' }}>{studentInfo.regNo}</td>
                        </tr>
                        <tr>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd', fontWeight: 'bold' }}>Programme</td>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd' }}>{studentInfo.stream}</td>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd', fontWeight: 'bold' }}>College</td>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd' }}>{studentInfo.college}</td>
                        </tr>
                        <tr>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd', fontWeight: 'bold' }}>Assessment Date</td>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd' }}>{new Date().toLocaleDateString()}</td>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd', fontWeight: 'bold' }}>Assessor</td>
                            <td style={{ padding: '5px 10px', border: '1px solid #ddd' }}>SkillPassport AI</td>
                        </tr>
                    </tbody>
                </table>

                <h2 style={{ fontSize: '14px', fontWeight: 'bold', borderBottom: '1px solid #ccc', paddingBottom: '5px', marginTop: '20px' }}>1. Student Profile Snapshot</h2>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>1.1 Top Interest Themes (RIASEC)</h3>
                <ul style={{ marginLeft: '20px' }}>
                    {riasec?.topThree?.map((code, idx) => (
                        <li key={code}><strong>Code {idx + 1}:</strong> {riasecNames[code]} ({code})</li>
                    ))}
                </ul>
                <p><em>{riasec?.interpretation}</em></p>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>1.2 Multi-Aptitude Battery Results</h3>
                {aptitude?.scores && (
                    <table style={{ width: '100%', borderCollapse: 'collapse', marginBottom: '10px' }}>
                        <thead>
                            <tr style={{ backgroundColor: '#f5f5f5' }}>
                                <th style={{ padding: '5px', border: '1px solid #ddd', textAlign: 'left' }}>Domain</th>
                                <th style={{ padding: '5px', border: '1px solid #ddd', textAlign: 'center' }}>Score</th>
                                <th style={{ padding: '5px', border: '1px solid #ddd', textAlign: 'center' }}>Percentage</th>
                            </tr>
                        </thead>
                        <tbody>
                            {Object.entries(aptitude.scores).map(([domain, data]) => (
                                <tr key={domain}>
                                    <td style={{ padding: '5px', border: '1px solid #ddd', textTransform: 'capitalize' }}>{domain}</td>
                                    <td style={{ padding: '5px', border: '1px solid #ddd', textAlign: 'center' }}>{data.correct}/{data.total}</td>
                                    <td style={{ padding: '5px', border: '1px solid #ddd', textAlign: 'center' }}>{data.percentage}%</td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                )}
                <p><strong>Top Strengths:</strong> {aptitude?.topStrengths?.join(', ') || 'N/A'}</p>
                <p><em>{aptitude?.cognitiveProfile}</em></p>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>1.3 Personality Highlights (Big Five)</h3>
                <table style={{ width: '100%', borderCollapse: 'collapse', marginBottom: '10px' }}>
                    <thead>
                        <tr style={{ backgroundColor: '#f5f5f5' }}>
                            <th style={{ padding: '5px', border: '1px solid #ddd', textAlign: 'left' }}>Trait</th>
                            <th style={{ padding: '5px', border: '1px solid #ddd', textAlign: 'center' }}>Score (0-5)</th>
                        </tr>
                    </thead>
                    <tbody>
                        {['O', 'C', 'E', 'A', 'N'].map(trait => (
                            <tr key={trait}>
                                <td style={{ padding: '5px', border: '1px solid #ddd' }}>{traitNames[trait]}</td>
                                <td style={{ padding: '5px', border: '1px solid #ddd', textAlign: 'center' }}>{bigFive?.[trait]?.toFixed(1) || '-'}</td>
                            </tr>
                        ))}
                    </tbody>
                </table>
                <p><em>{bigFive?.workStyleSummary}</em></p>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>1.4 Top Work Values</h3>
                <ol style={{ marginLeft: '20px' }}>
                    {workValues?.topThree?.map((val, idx) => (
                        <li key={idx}>{val.value} (Score: {val.score})</li>
                    ))}
                </ol>
                <p><em>{workValues?.motivationSummary}</em></p>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>1.5 Knowledge Assessment</h3>
                <p><strong>Score:</strong> {knowledge?.score}% | <strong>Correct:</strong> {knowledge?.correctCount}/{knowledge?.totalQuestions}</p>
                <p><strong>Strong Topics:</strong> {knowledge?.strongTopics?.join(', ') || 'N/A'}</p>

                <div style={{ backgroundColor: '#f0f4ff', padding: '10px', marginTop: '15px', border: '1px solid #c7d2fe' }}>
                    <strong>Overall Summary:</strong>
                    <p style={{ margin: '5px 0 0 0' }}>{results.overallSummary}</p>
                </div>
            </div>

            {/* Page 2: Career Fit */}
            <div style={{ pageBreakAfter: 'always' }}>
                <h2 style={{ fontSize: '14px', fontWeight: 'bold', borderBottom: '1px solid #ccc', paddingBottom: '5px' }}>2. Career Fit Results</h2>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>2.1 Best-Fit Career Clusters</h3>
                {careerFit?.clusters?.map((cluster, idx) => (
                    <div key={idx} style={{ border: '1px solid #ddd', padding: '10px', marginBottom: '10px' }}>
                        <h4 style={{ margin: '0 0 5px 0' }}>Cluster {idx + 1}: {cluster.title} ({cluster.matchScore}% Match)</h4>
                        <p><strong>Fit Level:</strong> {cluster.fit}</p>
                        {cluster.evidence && (
                            <>
                                <p><strong>Interest Evidence:</strong> {cluster.evidence.interest}</p>
                                <p><strong>Aptitude Evidence:</strong> {cluster.evidence.aptitude}</p>
                                <p><strong>Personality Evidence:</strong> {cluster.evidence.personality}</p>
                            </>
                        )}
                        <p><strong>Entry Roles:</strong> {cluster.roles?.entry?.join(', ') || 'N/A'}</p>
                        <p><strong>Mid Roles:</strong> {cluster.roles?.mid?.join(', ') || 'N/A'}</p>
                        <p><strong>Domains:</strong> {cluster.domains?.join(', ') || 'N/A'}</p>
                    </div>
                ))}

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>2.2 Specific Career Options</h3>
                <table style={{ width: '100%', borderCollapse: 'collapse' }}>
                    <thead>
                        <tr style={{ backgroundColor: '#f5f5f5' }}>
                            <th style={{ padding: '5px', border: '1px solid #ddd' }}>High Fit</th>
                            <th style={{ padding: '5px', border: '1px solid #ddd' }}>Medium Fit</th>
                            <th style={{ padding: '5px', border: '1px solid #ddd' }}>Explore Later</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style={{ padding: '5px', border: '1px solid #ddd', verticalAlign: 'top' }}>
                                <ol style={{ margin: '0', paddingLeft: '20px' }}>
                                    {careerFit?.specificOptions?.highFit?.map((r, i) => <li key={i}>{r}</li>)}
                                </ol>
                            </td>
                            <td style={{ padding: '5px', border: '1px solid #ddd', verticalAlign: 'top' }}>
                                <ol style={{ margin: '0', paddingLeft: '20px' }}>
                                    {careerFit?.specificOptions?.mediumFit?.map((r, i) => <li key={i}>{r}</li>)}
                                </ol>
                            </td>
                            <td style={{ padding: '5px', border: '1px solid #ddd', verticalAlign: 'top' }}>
                                <ol style={{ margin: '0', paddingLeft: '20px' }}>
                                    {careerFit?.specificOptions?.exploreLater?.map((r, i) => <li key={i}>{r}</li>)}
                                </ol>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            {/* Page 3: Skill Gap */}
            <div style={{ pageBreakAfter: 'always' }}>
                <h2 style={{ fontSize: '14px', fontWeight: 'bold', borderBottom: '1px solid #ccc', paddingBottom: '5px' }}>3. Skill Gap & Development Plan</h2>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>3.1 Current Strengths</h3>
                <ul style={{ marginLeft: '20px' }}>
                    {skillGap?.currentStrengths?.map((s, i) => <li key={i}>{s}</li>)}
                </ul>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>3.2 Employability Skills</h3>
                <p><strong>Strengths:</strong> {employability?.strengthAreas?.join(', ') || 'N/A'}</p>
                <p><strong>Areas to Improve:</strong> {employability?.improvementAreas?.join(', ') || 'N/A'}</p>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>3.3 Priority A Skills (Build in 6 months)</h3>
                {skillGap?.priorityA?.map((item, idx) => (
                    <div key={idx} style={{ border: '1px solid #ddd', padding: '8px', marginBottom: '8px' }}>
                        <p><strong>{idx + 1}. {item.skill}</strong> (Current: {item.currentLevel}/5 â†’ Target: {item.targetLevel}/5)</p>
                        <p><strong>Why:</strong> {item.whyNeeded}</p>
                        <p><strong>How:</strong> {item.howToBuild}</p>
                    </div>
                ))}

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>3.4 Priority B Skills (Build in 6-12 months)</h3>
                <ul style={{ marginLeft: '20px' }}>
                    {skillGap?.priorityB?.map((item, idx) => <li key={idx}>{item.skill}</li>)}
                </ul>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>3.5 Recommended Learning Track</h3>
                <p><strong>{skillGap?.recommendedTrack}</strong></p>
            </div>

            {/* Page 4: Roadmap */}
            <div>
                <h2 style={{ fontSize: '14px', fontWeight: 'bold', borderBottom: '1px solid #ccc', paddingBottom: '5px' }}>4. 6-12 Month Action Roadmap</h2>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>4.1 Recommended Projects</h3>
                {roadmap?.projects?.map((project, idx) => (
                    <div key={idx} style={{ border: '1px solid #ddd', padding: '8px', marginBottom: '8px' }}>
                        <p><strong>Project {idx + 1}: {project.title}</strong></p>
                        <p><strong>Purpose:</strong> {project.purpose}</p>
                        <p><strong>Output:</strong> {project.output}</p>
                    </div>
                ))}

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>4.2 Internship Pathway</h3>
                <p><strong>Types:</strong> {roadmap?.internship?.types?.join(', ') || 'N/A'}</p>
                <p><strong>Timeline:</strong> {roadmap?.internship?.timeline}</p>
                <p><strong>Resume Focus:</strong> {roadmap?.internship?.preparation?.resume}</p>
                <p><strong>Portfolio Focus:</strong> {roadmap?.internship?.preparation?.portfolio}</p>
                <p><strong>Interview Focus:</strong> {roadmap?.internship?.preparation?.interview}</p>

                <h3 style={{ fontSize: '12px', fontWeight: 'bold', marginTop: '15px' }}>4.3 Activities & Certifications</h3>
                <p><strong>Activities:</strong> {roadmap?.exposure?.activities?.join(', ') || 'N/A'}</p>
                <p><strong>Certifications:</strong> {roadmap?.exposure?.certifications?.join(', ') || 'N/A'}</p>

                {/* Timing Analysis for Print */}
                {timingAnalysis && (
                    <div style={{ backgroundColor: '#f8fafc', padding: '15px', marginTop: '20px', border: '1px solid #e2e8f0' }}>
                        <h3 style={{ fontSize: '12px', fontWeight: 'bold', margin: '0 0 10px 0' }}>Assessment Timing Analysis</h3>
                        <p><strong>Overall Pace:</strong> {timingAnalysis.overallPace || 'Moderate'} | <strong>Decision Style:</strong> {timingAnalysis.decisionStyle || 'Balanced'} | <strong>Confidence:</strong> {timingAnalysis.confidenceIndicator || 'Medium'}</p>
                        {timingAnalysis.recommendation && (
                            <p style={{ marginTop: '8px', fontStyle: 'italic' }}><strong>Recommendation:</strong> {timingAnalysis.recommendation}</p>
                        )}
                    </div>
                )}

                <div style={{ backgroundColor: '#f0f4ff', padding: '15px', marginTop: '20px', border: '1px solid #c7d2fe' }}>
                    <h3 style={{ fontSize: '12px', fontWeight: 'bold', margin: '0 0 10px 0' }}>Final Counselor Note</h3>
                    <p><strong>Your Biggest Advantage:</strong> {finalNote?.advantage}</p>
                    <p><strong>Top Growth Focus:</strong> {finalNote?.growthFocus}</p>
                    <p><strong>Next Review:</strong> {finalNote?.nextReview || 'End of 5th Semester'}</p>
                </div>
            </div>
        </div>
    );
};

export default PrintView;
