# Embedding API Worker Configuration
name = "embedding-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Environment variables
# OPENROUTER_API_KEY - OpenRouter API key (routes to OpenAI text-embedding-3-small)
# EMBEDDING_SERVICE_URL - URL to local Transformers.js service (fallback)
# VITE_SUPABASE_URL - Supabase project URL
# SUPABASE_SERVICE_ROLE_KEY - Supabase service role key

[vars]
# Supabase Configuration
VITE_SUPABASE_URL = "https://dpooleduinyyzxgrcwko.supabase.co"

# Embedding Service (fallback)
EMBEDDING_SERVICE_URL = "https://embedings.onrender.com"

# OpenRouter API Key (new key)
OPENROUTER_API_KEY = "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"

# Supabase Service Role Key
SUPABASE_SERVICE_ROLE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRwb29sZWR1aW55eXp4Z3Jjd2tvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1OTk5NDY5OCwiZXhwIjoyMDc1NTcwNjk4fQ.WIrwkA_-2oCjwmD6WpCf9N38hYXEwrIIXXHB4x5km10"

# KV namespace for caching embeddings (optional - uncomment and set ID after creating)
# To create: wrangler kv namespace create EMBEDDING_CACHE
# [[kv_namespaces]]
# binding = "EMBEDDING_CACHE"
# id = "your-kv-namespace-id"

# Cron triggers for queue processing
[triggers]
crons = ["*/5 * * * *"]  # Run every 5 minutes
